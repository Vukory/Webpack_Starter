!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=13)}([function(t,e,i){"use strict";const s=Object.prototype.toString,r=i(1);let n=!1,a=[];const h={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};e.longest=(t,e)=>t.reduce((t,i)=>Math.max(t,e?i[e].length:i.length),0),e.hasColor=t=>!!t&&r.hasColor(t);const l=e.isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t);e.nativeType=t=>s.call(t).slice(8,-1).toLowerCase().replace(/\s/g,""),e.isAsyncFn=t=>"asyncfunction"===e.nativeType(t),e.isPrimitive=t=>null!=t&&"object"!=typeof t&&"function"!=typeof t,e.resolve=(t,e,...i)=>"function"==typeof e?e.call(t,...i):e,e.scrollDown=(t=[])=>[...t.slice(1),t[0]],e.scrollUp=(t=[])=>[t.pop(),...t],e.reorder=(t=[])=>{let e=t.slice();return e.sort((t,e)=>t.index>e.index?1:t.index<e.index?-1:0),e},e.swap=(t,e,i)=>{let s=t.length,r=i===s?0:i<0?s-1:i,n=t[e];t[e]=t[r],t[r]=n},e.width=(t,e=80)=>{let i=t&&t.columns?t.columns:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[0]),"win32"===process.platform?i-1:i},e.height=(t,e=20)=>{let i=t&&t.rows?t.rows:e;return t&&"function"==typeof t.getWindowSize&&(i=t.getWindowSize()[1]),i},e.wordWrap=(t,e={})=>{if(!t)return t;"number"==typeof e&&(e={width:e});let{indent:i="",newline:s="\n"+i,width:r=80}=e,n=(s+i).match(/[^\S\n]/g)||[];r-=n.length;let a=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,h=t.trim(),l=new RegExp(a,"g"),o=h.match(l)||[];return o=o.map(t=>t.replace(/\n$/,"")),e.padEnd&&(o=o.map(t=>t.padEnd(r," "))),e.padStart&&(o=o.map(t=>t.padStart(r," "))),i+o.join(s)},e.unmute=t=>{let e=t.stack.find(t=>r.keys.color.includes(t));return e?r[e]:t.stack.find(t=>"bg"===t.slice(2))?r[e.slice(2)]:t=>t},e.pascal=t=>t?t[0].toUpperCase()+t.slice(1):"",e.inverse=t=>{if(!t||!t.stack)return t;let i=t.stack.find(t=>r.keys.color.includes(t));if(i){let s=r["bg"+e.pascal(i)];return s?s.black:t}let s=t.stack.find(t=>"bg"===t.slice(0,2));return s?r[s.slice(2).toLowerCase()]||t:r.none},e.complement=t=>{if(!t||!t.stack)return t;let i=t.stack.find(t=>r.keys.color.includes(t)),s=t.stack.find(t=>"bg"===t.slice(0,2));if(i&&!s)return r[h[i]||i];if(s){let i=s.slice(2).toLowerCase(),n=h[i];return n&&r["bg"+e.pascal(n)]||t}return r.none},e.meridiem=t=>{let e=t.getHours(),i=t.getMinutes(),s=e>=12?"pm":"am";return e%=12,(0===e?12:e)+":"+(i<10?"0"+i:i)+" "+s},e.set=(t={},i="",s)=>i.split(".").reduce((t,i,r,n)=>{let a=n.length-1>r?t[i]||{}:s;return!e.isObject(a)&&r<n.length-1&&(a={}),t[i]=a},t),e.get=(t={},e="",i)=>{let s=null==t[e]?e.split(".").reduce((t,e)=>t&&t[e],t):t[e];return null==s?i:s},e.mixin=(t,i)=>{if(!l(t))return i;if(!l(i))return t;for(let s of Object.keys(i)){let r=Object.getOwnPropertyDescriptor(i,s);if(r.hasOwnProperty("value"))if(t.hasOwnProperty(s)&&l(r.value)){let n=Object.getOwnPropertyDescriptor(t,s);l(n.value)?t[s]=e.merge({},t[s],i[s]):Reflect.defineProperty(t,s,r)}else Reflect.defineProperty(t,s,r);else Reflect.defineProperty(t,s,r)}return t},e.merge=(...t)=>{let i={};for(let s of t)e.mixin(i,s);return i},e.mixinEmitter=(t,i)=>{let s=i.constructor.prototype;for(let r of Object.keys(s)){let n=s[r];"function"==typeof n?e.define(t,r,n.bind(i)):e.define(t,r,n)}},e.onExit=t=>{const e=(t,e)=>{n||(n=!0,a.forEach(t=>t()),!0===t&&process.exit(128+e))};0===a.length&&(process.once("SIGTERM",e.bind(null,!0,15)),process.once("SIGINT",e.bind(null,!0,2)),process.once("exit",e)),a.push(t)},e.define=(t,e,i)=>{Reflect.defineProperty(t,e,{value:i})},e.defineExport=(t,e,i)=>{let s;Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,set(t){s=t},get:()=>s?s():i()})}},function(t,e,i){"use strict";const s={enabled:!0,visible:!0,styles:{},keys:{}};"FORCE_COLOR"in process.env&&(s.enabled="0"!==process.env.FORCE_COLOR);const r=(t,e,i)=>{let{open:s,close:r,regex:n}=t;return e=s+(e.includes(r)?e.replace(n,r+s):e)+r,i?e.replace(/\r?\n/g,`${r}$&${s}`):e},n=(t,e,i)=>{s.styles[t]=(t=>(t.open=`[${t.codes[0]}m`,t.close=`[${t.codes[1]}m`,t.regex=new RegExp(`\\u001b\\[${t.codes[1]}m`,"g"),t))({name:t,codes:e}),(s.keys[i]||(s.keys[i]=[])).push(t),Reflect.defineProperty(s,t,{get(){let e=t=>((t,e)=>{if(""===t||null==t)return"";if(!1===s.enabled)return t;if(!1===s.visible)return"";let i=""+t,n=i.includes("\n"),a=e.length;for(;a-- >0;)i=r(s.styles[e[a]],i,n);return i})(t,e.stack);return Reflect.setPrototypeOf(e,s),e.stack=this.stack?this.stack.concat(t):[t],e}})};n("reset",[0,0],"modifier"),n("bold",[1,22],"modifier"),n("dim",[2,22],"modifier"),n("italic",[3,23],"modifier"),n("underline",[4,24],"modifier"),n("inverse",[7,27],"modifier"),n("hidden",[8,28],"modifier"),n("strikethrough",[9,29],"modifier"),n("black",[30,39],"color"),n("red",[31,39],"color"),n("green",[32,39],"color"),n("yellow",[33,39],"color"),n("blue",[34,39],"color"),n("magenta",[35,39],"color"),n("cyan",[36,39],"color"),n("white",[37,39],"color"),n("gray",[90,39],"color"),n("grey",[90,39],"color"),n("bgBlack",[40,49],"bg"),n("bgRed",[41,49],"bg"),n("bgGreen",[42,49],"bg"),n("bgYellow",[43,49],"bg"),n("bgBlue",[44,49],"bg"),n("bgMagenta",[45,49],"bg"),n("bgCyan",[46,49],"bg"),n("bgWhite",[47,49],"bg"),n("blackBright",[90,39],"bright"),n("redBright",[91,39],"bright"),n("greenBright",[92,39],"bright"),n("yellowBright",[93,39],"bright"),n("blueBright",[94,39],"bright"),n("magentaBright",[95,39],"bright"),n("cyanBright",[96,39],"bright"),n("whiteBright",[97,39],"bright"),n("bgBlackBright",[100,49],"bgBright"),n("bgRedBright",[101,49],"bgBright"),n("bgGreenBright",[102,49],"bgBright"),n("bgYellowBright",[103,49],"bgBright"),n("bgBlueBright",[104,49],"bgBright"),n("bgMagentaBright",[105,49],"bgBright"),n("bgCyanBright",[106,49],"bgBright"),n("bgWhiteBright",[107,49],"bgBright");const a=s.ansiRegex=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g;s.hasColor=s.hasAnsi=t=>(a.lastIndex=0,!!t&&"string"==typeof t&&a.test(t)),s.unstyle=t=>(a.lastIndex=0,"string"==typeof t?t.replace(a,""):t),s.none=s.clear=s.noop=t=>t,s.stripColor=s.unstyle,s.symbols=i(16),s.define=n,t.exports=s},function(t,e,i){"use strict";const s=i(5),r=i(0);t.exports=class extends s{constructor(t){super(t),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}separator(){if(this.options.separator)return super.separator();let t=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():t}pointer(t,e){return!this.multiple||this.options.pointer?super.pointer(t,e):""}indicator(t,e){return this.multiple?super.indicator(t,e):""}choiceMessage(t,e){let i=this.resolve(t.message,this.state,t,e);return"heading"!==t.role||r.hasColor(i)||(i=this.styles.strong(i)),this.resolve(i,this.state,t,e)}choiceSeparator(){return":"}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,s=await this.pointer(t,e),n=await this.indicator(t,e)+(t.pad||""),a=await this.resolve(t.hint,this.state,t,e);a&&!r.hasColor(a)&&(a=this.styles.muted(a));let h=this.indent(t),l=await this.choiceMessage(t,e),o=()=>[this.margin[3],h+s+n,l,this.margin[1],a].filter(Boolean).join(" ");return"heading"===t.role?o():t.disabled?(r.hasColor(l)||(l=this.styles.disabled(l)),o()):(i&&(l=this.styles.em(l)),o())}async renderChoices(){if("choices"===this.state.loading)return this.styles.warning("Loading choices");if(this.state.submitted)return"";let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e)),e=await Promise.all(t);e.length||e.push(this.styles.danger("No matching choices"));let i,s=this.margin[0]+e.join("\n");return this.options.choicesHeader&&(i=await this.resolve(this.options.choicesHeader,this.state)),[i,s].filter(Boolean).join("\n")}format(){return this.state.submitted?Array.isArray(this.selected)?this.selected.map(t=>this.styles.primary(t.name)).join(", "):this.styles.primary(this.selected.name):""}async render(){let{submitted:t,size:e}=this.state,i="",s=await this.header(),r=await this.prefix(),n=await this.separator(),a=await this.message();!1!==this.options.promptLine&&(i=[r,a,n,""].join(" "),this.state.prompt=i);let h=await this.format(),l=await this.error()||await this.hint(),o=await this.renderChoices(),u=await this.footer();h&&(i+=h),l&&!i.includes(l)&&(i+=" "+l),t&&!h&&!o.trim()&&this.multiple&&null!=this.emptyError&&(i+=this.styles.danger(this.emptyError)),this.clear(e),this.write([s,i,o,u].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}}},function(t,e,i){"use strict";const s=i(4),r=i(10),{isPrimitive:n}=i(0);t.exports=class extends s{constructor(t){super(t),this.initial=n(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[]}async keypress(t,e={}){let i=this.state.prevKeypress;return this.state.prevKeypress=e,!0!==this.options.multiline||"return"!==e.name||i&&"return"===i.name?super.keypress(t,e):this.append("\n",e)}moveCursor(t){this.cursor+=t}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(t,e){if(!t||e.ctrl||e.code)return this.alert();this.append(t)}append(t){let{cursor:e,input:i}=this.state;this.input=`${i}`.slice(0,e)+t+`${i}`.slice(e),this.moveCursor(String(t).length),this.render()}insert(t){this.append(t)}delete(){let{cursor:t,input:e}=this.state;if(t<=0)return this.alert();this.input=`${e}`.slice(0,t-1)+`${e}`.slice(t),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:t,input:e}=this.state;if(void 0===e[t])return this.alert();this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.render()}cutForward(){let t=this.cursor;if(this.input.length<=t)return this.alert();this.state.clipboard.push(this.input.slice(t)),this.input=this.input.slice(0,t),this.render()}cutLeft(){let t=this.cursor;if(0===t)return this.alert();let e=this.input.slice(0,t),i=this.input.slice(t),s=e.split(" ");this.state.clipboard.push(s.pop()),this.input=s.join(" "),this.cursor=this.input.length,this.input+=i,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let t=null!=this.initial?String(this.initial):"";if(!t||!t.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(t){return!!t}async format(t=this.value){let e=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(t||e):r(this,{input:t,initial:e,pos:this.cursor})}async render(){let t=this.state.size,e=await this.prefix(),i=await this.separator(),s=[e,await this.message(),i].filter(Boolean).join(" ");this.state.prompt=s;let r=await this.header(),n=await this.format(),a=await this.error()||await this.hint(),h=await this.footer();a&&!n.includes(a)&&(n+=" "+a),s+=" "+n,this.clear(t),this.write([r,s,h].filter(Boolean).join("\n")),this.restore()}}},function(t,e,i){"use strict";const s=i(8),r=i(1),n=i(17),a=i(20),h=i(21),l=i(22),o=i(0),u=i(25);class c extends s{constructor(t={}){super(),this.name=t.name,this.type=t.type,this.options=t,l(this),a(this),this.state=new h(this),this.initial=[t.initial,t.default].find(t=>null!=t),this.stdout=t.stdout||process.stdout,this.stdin=t.stdin||process.stdin,this.scale=t.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=function(t){"number"==typeof t&&(t=[t,t,t,t]);let e=[].concat(t||[]),i=t=>t%2==0?"\n":" ",s=[];for(let t=0;t<4;t++){let r=i(t);e[t]?s.push(r.repeat(e[t])):s.push("")}return s}(this.options.margin),this.setMaxListeners(0),function(t){let e=e=>void 0===t[e]||"function"==typeof t[e],i=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(t.options)){if(i.includes(r))continue;if(/^on[A-Z]/.test(r))continue;let n=t.options[r];"function"==typeof n&&e(r)?s.includes(r)||(t[r]=n.bind(t)):"function"!=typeof t[r]&&(t[r]=n)}}(this)}async keypress(t,e={}){this.keypressed=!0;let i=n.action(t,n(t,e),this.options.actions);this.state.keypress=i,this.emit("keypress",t,i),this.emit("state",this.state.clone());let s=this.options[i.action]||this[i.action]||this.dispatch;if("function"==typeof s)return await s.call(this,t,i);this.alert()}alert(){delete this.state.alert,!1===this.options.show?this.emit("alert"):this.stdout.write(u.code.beep)}cursorHide(){this.stdout.write(u.cursor.hide()),o.onExit(()=>this.cursorShow())}cursorShow(){this.stdout.write(u.cursor.show())}write(t){t&&(this.stdout&&!1!==this.state.show&&this.stdout.write(t),this.state.buffer+=t)}clear(t=0){let e=this.state.buffer;this.state.buffer="",(e||t)&&!1!==this.options.show&&this.stdout.write(u.cursor.down(t)+u.clear(e,this.width))}restore(){if(this.state.closed||!1===this.options.show)return;let{prompt:t,after:e,rest:i}=this.sections(),{cursor:s,initial:r="",input:n="",value:a=""}=this,h={after:e,cursor:s,initial:r,input:n,prompt:t,size:this.state.size=i.length,value:a},l=u.cursor.restore(h);l&&this.stdout.write(l)}sections(){let{buffer:t,input:e,prompt:i}=this.state;i=r.unstyle(i);let s=r.unstyle(t),n=s.indexOf(i),a=s.slice(0,n),h=s.slice(n).split("\n"),l=h[0],o=h[h.length-1],u=(i+(e?" "+e:"")).length,c=u<l.length?l.slice(u+1):"";return{header:a,prompt:l,after:c,rest:h.slice(1),last:o}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let t=this.state.error||await this.validate(this.value,this.state);if(!0!==t){let e="\n"+this.symbols.pointer+" ";return e+="string"==typeof t?t.trim():"Invalid input",this.state.error="\n"+this.styles.danger(e),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,void(this.state.error=void 0)}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(t){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),"function"==typeof this.options.onCancel&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(t))}async close(){this.state.closed=!0;try{let t=this.sections(),e=Math.ceil(t.prompt.length/this.width);t.rest&&this.write(u.cursor.down(t.rest.length)),this.write("\n".repeat(e))}catch(t){}this.emit("close")}start(){this.stop||!1===this.options.show||(this.stop=n.listen(this,this.keypress.bind(this)),this.once("close",this.stop))}async skip(){return this.skipped=!0===this.options.skip,"function"==typeof this.options.skip&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:t,options:e,result:i}=this;if(this.format=()=>t.call(this,this.value),this.result=()=>i.call(this,this.value),"function"==typeof e.initial&&(this.initial=await e.initial.call(this,this)),"function"==typeof e.onRun&&await e.onRun.call(this,this),"function"==typeof e.onSubmit){let t=e.onSubmit.bind(this),i=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await t(this.name,this.value,this),i())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise(async(t,e)=>{if(this.once("submit",t),this.once("cancel",e),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")})}async element(t,e,i){let{options:s,state:r,symbols:n,timers:a}=this,h=a&&a[t];r.timer=h;let l=s[t]||r[t]||n[t],o=e&&null!=e[t]?e[t]:await l;if(""===o)return o;let u=await this.resolve(o,r,e,i);return!u&&e&&e[t]?this.resolve(l,r,e,i):u}async prefix(){let t=await this.element("prefix")||this.symbols,e=this.timers&&this.timers.prefix,i=this.state;if(i.timer=e,o.isObject(t)&&(t=t[i.status]||t.pending),!o.hasColor(t)){return(this.styles[i.status]||this.styles.pending)(t)}return t}async message(){let t=await this.element("message");return o.hasColor(t)?t:this.styles.strong(t)}async separator(){let t=await this.element("separator")||this.symbols,e=this.timers&&this.timers.separator,i=this.state;i.timer=e;let s=t[i.status]||t.pending||i.separator,r=await this.resolve(s,i);return o.isObject(r)&&(r=r[i.status]||r.pending),o.hasColor(r)?r:this.styles.muted(r)}async pointer(t,e){let i=await this.element("pointer",t,e);if("string"==typeof i&&o.hasColor(i))return i;if(i){let t=this.styles,s=this.index===e,r=s?t.primary:t=>t,n=await this.resolve(i[s?"on":"off"]||i,this.state),a=o.hasColor(n)?n:r(n);return s?a:" ".repeat(n.length)}}async indicator(t,e){let i=await this.element("indicator",t,e);if("string"==typeof i&&o.hasColor(i))return i;if(i){let e=this.styles,s=!0===t.enabled,r=s?e.success:e.dark,n=i[s?"on":"off"]||i;return o.hasColor(n)?n:r(n)}return""}body(){return null}footer(){if("pending"===this.state.status)return this.element("footer")}header(){if("pending"===this.state.status)return this.element("header")}async hint(){if("pending"===this.state.status&&!this.isValue(this.state.input)){let t=await this.element("hint");return o.hasColor(t)?t:this.styles.muted(t)}}error(t){return this.state.submitted?"":t||this.state.error}format(t){return t}result(t){return t}validate(t){return!0!==this.options.required||this.isValue(t)}isValue(t){return null!=t&&""!==t}resolve(t,...e){return o.resolve(this,t,...e)}get base(){return c.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||o.height(this.stdout,25)}get width(){return this.options.columns||o.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(t){this.state.cursor=t}get cursor(){return this.state.cursor}set input(t){this.state.input=t}get input(){return this.state.input}set value(t){this.state.value=t}get value(){let{input:t,value:e}=this.state,i=[e,t].find(this.isValue.bind(this));return this.isValue(i)?i:this.initial}static get prompt(){return t=>new this(t).run()}}t.exports=c},function(t,e,i){"use strict";const s=i(1),r=i(4),n=i(28),a=i(0),{reorder:h,scrollUp:l,scrollDown:o,isObject:u,swap:c}=a;function d(t,e){if(e instanceof Promise)return e;if("function"==typeof e){if(a.isAsyncFn(e))return e;e=e.call(t,t)}for(let i of e){if(Array.isArray(i.choices)){let e=i.choices.filter(e=>!t.isDisabled(e));i.enabled=e.every(t=>!0===t.enabled)}!0===t.isDisabled(i)&&delete i.enabled}return e}t.exports=class extends r{constructor(t){super(t),this.cursorHide(),this.maxSelected=t.maxSelected||1/0,this.multiple=t.multiple||!1,this.initial=t.initial||0,this.delay=t.delay||0,this.longest=0,this.num=""}async initialize(){"function"==typeof this.options.initial&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:t,initial:e,autofocus:i,suggest:s}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(t)),this.choices.forEach(t=>t.enabled=!1),"function"!=typeof s&&0===this.selectable.length)throw new Error("At least one choice must be selectable");u(e)&&(e=Object.keys(e)),Array.isArray(e)?(null!=i&&(this.index=this.findIndex(i)),e.forEach(t=>this.enable(this.find(t))),await this.render()):(null!=i&&(e=i),"string"==typeof e&&(e=this.findIndex(e)),"number"==typeof e&&e>-1&&(this.index=Math.max(0,Math.min(e,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(t,e){this.state.loadingChoices=!0;let i=[],s=0,r=async(t,e)=>{"function"==typeof t&&(t=await t.call(this)),t instanceof Promise&&(t=await t);for(let n=0;n<t.length;n++){let a=t[n]=await this.toChoice(t[n],s++,e);i.push(a),a.choices&&await r(a.choices,a)}return i};return r(t,e).then(t=>(this.state.loadingChoices=!1,t))}async toChoice(t,e,i){if("function"==typeof t&&(t=await t.call(this,this)),t instanceof Promise&&(t=await t),"string"==typeof t&&(t={name:t}),t.normalized)return t;t.normalized=!0;let r=t.value,h=n(t.role,this.options);if("string"!=typeof(t=h(this,t)).disabled||t.hint||(t.hint=t.disabled,t.disabled=!0),!0===t.disabled&&null==t.hint&&(t.hint="(disabled)"),null!=t.index)return t;t.name=t.name||t.key||t.title||t.value||t.message,t.message=t.message||t.name||"",t.value=[t.value,t.name].find(this.isValue.bind(this)),t.input="",t.index=e,t.cursor=0,a.define(t,"parent",i),t.level=i?i.level+1:1,null==t.indent&&(t.indent=i?i.indent+"  ":t.indent||""),t.path=i?i.path+"."+t.name:t.name,t.enabled=!(!this.multiple||this.isDisabled(t)||!t.enabled&&!this.isSelected(t)),this.isDisabled(t)||(this.longest=Math.max(this.longest,s.unstyle(t.message).length));let l={...t};return t.reset=(e=l.input,i=l.value)=>{for(let e of Object.keys(l))t[e]=l[e];t.input=e,t.value=i},null==r&&"function"==typeof t.initial&&(t.input=await t.initial.call(this,this.state,t,e)),t}async onChoice(t,e){this.emit("choice",t,e,this),"function"==typeof t.onChoice&&await t.onChoice.call(this,this.state,t,e)}async addChoice(t,e,i){let s=await this.toChoice(t,e,i);return this.choices.push(s),this.index=this.choices.length-1,this.limit=this.choices.length,s}async newItem(t,e,i){let s={name:"New choice name?",editable:!0,newChoice:!0,...t},r=await this.addChoice(s,e,i);return r.updateChoice=()=>{delete r.newChoice,r.name=r.message=r.input,r.input="",r.cursor=0},this.render()}indent(t){return null==t.indent?t.level>1?"  ".repeat(t.level-1):"":t.indent}dispatch(t,e){if(this.multiple&&this[e.name])return this[e.name]();this.alert()}focus(t,e){return"boolean"!=typeof e&&(e=t.enabled),e&&!t.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=t.index,t.enabled=e&&!this.isDisabled(t),t)}space(){return this.multiple?(this.toggle(this.focused),this.render()):this.alert()}a(){if(this.maxSelected<this.choices.length)return this.alert();let t=this.selectable.every(t=>t.enabled);return this.choices.forEach(e=>e.enabled=!t),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach(t=>t.enabled=!t.enabled),this.render())}g(t=this.focused){return this.choices.some(t=>!!t.parent)?(this.toggle(t.parent&&!t.choices?t.parent:t),this.render()):this.a()}toggle(t,e){if(!t.enabled&&this.selected.length>=this.maxSelected)return this.alert();"boolean"!=typeof e&&(e=!t.enabled),t.enabled=e,t.choices&&t.choices.forEach(t=>this.toggle(t,e));let i=t.parent;for(;i;){let t=i.choices.filter(t=>this.isDisabled(t));i.enabled=t.every(t=>!0===t.enabled),i=i.parent}return d(this,this.choices),this.emit("toggle",t,this),t}enable(t){return this.selected.length>=this.maxSelected?this.alert():(t.enabled=!this.isDisabled(t),t.choices&&t.choices.forEach(this.enable.bind(this)),t)}disable(t){return t.enabled=!1,t.choices&&t.choices.forEach(this.disable.bind(this)),t}number(t){this.num+=t;let e=t=>{let e=Number(t);if(e>this.choices.length-1)return this.alert();let i=this.focused,s=this.choices.find(t=>e===t.index);if(!s.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(-1===this.visible.indexOf(s)){let t=h(this.choices),e=t.indexOf(s);if(i.index>e){let i=t.slice(e,e+this.limit),s=t.filter(t=>!i.includes(t));this.choices=i.concat(s)}else{let i=e-this.limit+1;this.choices=t.slice(i).concat(t.slice(0,i))}}return this.index=this.choices.indexOf(s),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise(t=>{let i=this.choices.length,s=this.num,r=(i=!1,r)=>{clearTimeout(this.numberTimeout),i&&(r=e(s)),this.num="",t(r)};return"0"===s||1===s.length&&Number(s+"0")>i?r(!0):Number(s)>i?r(!1,this.alert()):void(this.numberTimeout=setTimeout(()=>r(!0),this.delay))})}home(){return this.choices=h(this.choices),this.index=0,this.render()}end(){let t=this.choices.length-this.limit,e=h(this.choices);return this.choices=e.slice(t).concat(e.slice(0,t)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&0===i?this.alert():t>e&&0===i?this.scrollUp():(this.index=(i-1%t+t)%t,this.isDisabled()?this.up():this.render())}down(){let t=this.choices.length,e=this.visible.length,i=this.index;return!1===this.options.scroll&&i===e-1?this.alert():t>e&&i===e-1?this.scrollDown():(this.index=(i+1)%t,this.isDisabled()?this.down():this.render())}scrollUp(t=0){return this.choices=l(this.choices),this.index=t,this.isDisabled()?this.up():this.render()}scrollDown(t=this.visible.length-1){return this.choices=o(this.choices),this.index=t,this.isDisabled()?this.down():this.render()}async shiftUp(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index-1),await this.up(),void(this.sorting=!1)):this.scrollUp(this.index)}async shiftDown(){return!0===this.options.sort?(this.sorting=!0,this.swap(this.index+1),await this.down(),void(this.sorting=!1)):this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(t){c(this.choices,this.index,t)}isDisabled(t=this.focused){return!(!t||!["disabled","collapsed","hidden","completing","readonly"].some(e=>!0===t[e]))||t&&"heading"===t.role}isEnabled(t=this.focused){if(Array.isArray(t))return t.every(t=>this.isEnabled(t));if(t.choices){let e=t.choices.filter(t=>!this.isDisabled(t));return t.enabled&&e.every(t=>this.isEnabled(t))}return t.enabled&&!this.isDisabled(t)}isChoice(t,e){return t.name===e||t.index===Number(e)}isSelected(t){return Array.isArray(this.initial)?this.initial.some(e=>this.isChoice(t,e)):this.isChoice(t,this.initial)}map(t=[],e="value"){return[].concat(t||[]).reduce((t,i)=>(t[i]=this.find(i,e),t),{})}filter(t,e){let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=(this.options.multiple?this.state._choices:this.choices).filter(i);return e?s.map(t=>t[e]):s}find(t,e){if(u(t))return e?t[e]:t;let i="function"==typeof t?t:(e,i)=>[e.name,i].includes(t),s=this.choices.find(i);return s?e?s[e]:s:void 0}findIndex(t){return this.choices.indexOf(this.find(t))}async submit(){let t=this.focused;if(!t)return this.alert();if(t.newChoice)return t.input?(t.updateChoice(),this.render()):this.alert();if(this.choices.some(t=>t.newChoice))return this.alert();let{reorder:e,sort:i}=this.options,s=!0===this.multiple,r=this.selected;return void 0===r?this.alert():(Array.isArray(r)&&!1!==e&&!0!==i&&(r=a.reorder(r)),this.value=s?r.map(t=>t.name):r.name,super.submit())}set choices(t=[]){this.state._choices=this.state._choices||[],this.state.choices=t;for(let e of t)this.state._choices.some(t=>t.name===e.name)||this.state._choices.push(e);if(!this._initial&&this.options.initial){this._initial=!0;let t=this.initial;if("string"==typeof t||"number"==typeof t){let e=this.find(t);e&&(this.initial=e.index,this.focus(e,!0))}}}get choices(){return d(this,this.state.choices||[])}set visible(t){this.state.visible=t}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(t){this.state.limit=t}get limit(){let{state:t,options:e,choices:i}=this,s=t.limit||this._limit||e.limit||i.length;return Math.min(s,this.height)}set value(t){super.value=t}get value(){return"string"!=typeof super.value&&super.value===this.initial?this.input:super.value}set index(t){this.state.index=t}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let t=this.choices[this.index];return t&&this.state.submitted&&!0!==this.multiple&&(t.enabled=!0),t}get selectable(){return this.choices.filter(t=>!this.isDisabled(t))}get selected(){return this.multiple?this.enabled:this.focused}}},function(t,e,i){"use strict";const s=i(1),r=i(2),n=i(10);t.exports=class extends r{constructor(t){super({...t,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find(t=>null!=t),this.emptyError="",this.values={}}async reset(t){return await super.reset(),!0===t&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach(t=>t.reset&&t.reset()),this.render()}dispatch(t){return!!t&&this.append(t)}append(t){let e=this.focused;if(!e)return this.alert();let{cursor:i,input:s}=e;return e.value=e.input=s.slice(0,i)+t+s.slice(i),e.cursor++,this.render()}delete(){let t=this.focused;if(!t||t.cursor<=0)return this.alert();let{cursor:e,input:i}=t;return t.value=t.input=i.slice(0,e-1)+i.slice(e),t.cursor--,this.render()}deleteForward(){let t=this.focused;if(!t)return this.alert();let{cursor:e,input:i}=t;if(void 0===i[e])return this.alert();let s=`${i}`.slice(0,e)+`${i}`.slice(e+1);return t.value=t.input=s,this.render()}right(){let t=this.focused;return t?t.cursor>=t.input.length?this.alert():(t.cursor++,this.render()):this.alert()}left(){let t=this.focused;return t?t.cursor<=0?this.alert():(t.cursor--,this.render()):this.alert()}space(t,e){return this.dispatch(t,e)}number(t,e){return this.dispatch(t,e)}next(){let t=this.focused;if(!t)return this.alert();let{initial:e,input:i}=t;return e&&e.startsWith(i)&&i!==e?(t.value=t.input=e,t.cursor=t.value.length,this.render()):super.next()}prev(){let t=this.focused;return t?0===t.cursor?super.prev():(t.value=t.input="",t.cursor=0,this.render()):this.alert()}separator(){return""}format(t){return this.state.submitted?"":super.format(t)}pointer(){return""}indicator(t){return t.input?"â¦¿":"âŠ™"}async choiceSeparator(t,e){let i=await this.resolve(t.separator,this.state,t,e)||":";return i?" "+this.styles.disabled(i):""}async renderChoice(t,e){await this.onChoice(t,e);let{state:i,styles:r}=this,{cursor:a,initial:h="",name:l,hint:o,input:u=""}=t,{muted:c,submitted:d,primary:p,danger:m}=r,f=o,g=this.index===e,y=t.validate||(()=>!0),b=await this.choiceSeparator(t,e),w=t.message;"right"===this.align&&(w=w.padStart(this.longest+1," ")),"left"===this.align&&(w=w.padEnd(this.longest+1," "));let v=this.values[l]=u||h,x=u?"success":"dark";!0!==await y.call(t,v,this.state)&&(x="danger");let C=(0,r[x])(await this.indicator(t,e))+(t.pad||""),k=this.indent(t),S=()=>[k,C,w+b,u,f].filter(Boolean).join(" ");if(i.submitted)return w=s.unstyle(w),u=d(u),f="",S();if(t.format)u=await t.format.call(this,u,t,e);else{let t=this.styles.muted;u=n(this,{input:u,initial:h,pos:a,showCursor:g,color:t})}return this.isValue(u)||(u=this.styles.muted(this.symbols.ellipsis)),t.result&&(this.values[l]=await t.result.call(this,v,t,e)),g&&(w=p(w)),t.error?u+=(u?" ":"")+m(t.error.trim()):t.hint&&(u+=(u?" ":"")+c(t.hint.trim())),S()}async submit(){return this.value=this.values,super.base.submit.call(this)}}},function(t,e,i){"use strict";const s=i(4),{isPrimitive:r,hasColor:n}=i(0);t.exports=class extends s{constructor(t){super(t),this.cursorHide()}async initialize(){let t=await this.resolve(this.initial,this.state);this.input=await this.cast(t),await super.initialize()}dispatch(t){return this.isValue(t)?(this.input=t,this.submit()):this.alert()}format(t){let{styles:e,state:i}=this;return i.submitted?e.success(t):e.primary(t)}cast(t){return this.isTrue(t)}isTrue(t){return/^[ty1]/i.test(t)}isFalse(t){return/^[fn0]/i.test(t)}isValue(t){return r(t)&&(this.isTrue(t)||this.isFalse(t))}async hint(){if("pending"===this.state.status){let t=await this.element("hint");return n(t)?t:this.styles.muted(t)}}async render(){let{input:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),this.styles.muted(this.default),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),a=this.value=this.cast(t),h=await this.format(a),l=await this.error()||await this.hint(),o=await this.footer();l&&!r.includes(l)&&(h+=" "+l),r+=" "+h,this.clear(e),this.write([n,r,o].filter(Boolean).join("\n")),this.restore()}set value(t){super.value=t}get value(){return this.cast(super.value)}}},function(t,e){t.exports=require("events")},function(t,e,i){"use strict";const s=i(6),r=()=>{throw new Error("expected prompt to have a custom authenticate method")},n=(t=r)=>class extends s{constructor(t){super(t)}async submit(){this.value=await t.call(this,this.values,this.state),super.base.submit.call(this)}static create(t){return n(t)}};t.exports=n()},function(t,e,i){"use strict";const s=i(0);t.exports=(t,e={})=>{t.cursorHide();let{input:i="",initial:r="",pos:n,showCursor:a=!0,color:h}=e,l=h||t.styles.placeholder,o=s.inverse(t.styles.primary),u=e=>o(t.styles.black(e)),c=i,d=u(" ");if(t.blink&&!0===t.blink.off&&(u=t=>t,d=""),a&&0===n&&""===r&&""===i)return u(" ");if(a&&0===n&&(i===r||""===i))return u(r[0])+l(r.slice(1));r=s.isPrimitive(r)?`${r}`:"",i=s.isPrimitive(i)?`${i}`:"";let p=r&&r.startsWith(i)&&r!==i,m=p?u(r[i.length]):d;if(n!==i.length&&!0===a&&(c=i.slice(0,n)+u(i[n])+i.slice(n+1),m=""),!1===a&&(m=""),p){let e=t.styles.unstyle(c+m);return c+m+l(r.slice(e.length))}return c+m}},function(t,e,i){"use strict";const s=i(3),r=i(32);t.exports=class extends s{constructor(t){super(t);let e=this.options.history;if(e&&e.store){let t=e.values||this.initial;this.autosave=!!e.autosave,this.store=e.store,this.data=this.store.get("values")||{past:[],present:t},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(t){return this.store?(this.data=r(t,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){this.store&&(this.data=r("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&!0===this.autosave&&this.save(),super.submit()}}},function(t,e,i){"use strict";const s=i(3);t.exports=class extends s{constructor(t={}){super({style:"number",...t}),this.min=this.isValue(t.min)?this.toNumber(t.min):-1/0,this.max=this.isValue(t.max)?this.toNumber(t.max):1/0,this.delay=null!=t.delay?t.delay:1e3,this.float=!1!==t.float,this.round=!0===t.round||!1===t.float,this.major=t.major||10,this.minor=t.minor||1,this.initial=null!=t.initial?t.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(t){return!/[-+.]/.test(t)||"."===t&&this.input.includes(".")?this.alert("invalid number"):super.append(t)}number(t){return super.append(t)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(t){let e=t||this.minor,i=this.toNumber(this.input);return i>this.max+e?this.alert():(this.input=`${i+e}`,this.render())}down(t){let e=t||this.minor,i=this.toNumber(this.input);return i<this.min-e?this.alert():(this.input=`${i-e}`,this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(t=this.input){return"function"==typeof this.options.format?this.options.format.call(this,t):this.styles.info(t)}toNumber(t=""){return this.float?+t:Math.round(+t)}isValue(t){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(t)}submit(){let t=[this.input,this.initial].find(t=>this.isValue(t));return this.value=this.toNumber(t||0),super.submit()}}},function(t,e,i){const{prompt:s}=i(14);s({type:"input",name:"username",message:"What is your username?"}).then(t=>console.log("Answer:",t)).catch(console.error)},function(t,e,i){"use strict";const s=i(15),r=i(8),n=i(0);class a extends r{constructor(t,e){super(),this.options=n.merge({},t),this.answers={...e}}register(t,e){if(n.isObject(t)){for(let e of Object.keys(t))this.register(e,t[e]);return this}s.equal(typeof e,"function","expected a function");let i=t.toLowerCase();return e.prototype instanceof this.Prompt?this.prompts[i]=e:this.prompts[i]=e(this.Prompt,this),this}async prompt(t=[]){for(let e of[].concat(t))try{"function"==typeof e&&(e=await e.call(this)),await this.ask(n.merge({},this.options,e))}catch(t){return Promise.reject(t)}return this.answers}async ask(t){"function"==typeof t&&(t=await t.call(this));let e=n.merge({},this.options,t),{type:i,name:r}=t,{set:a,get:h}=n;if("function"==typeof i&&(i=await i.call(this,t,this.answers)),!i)return this.answers[r];s(this.prompts[i],`Prompt "${i}" is not registered`);let l=new this.prompts[i](e),o=h(this.answers,r);l.state.answers=this.answers,l.enquirer=this,r&&l.on("submit",t=>{this.emit("answer",r,t,l),a(this.answers,r,t)});let u=l.emit.bind(l);return l.emit=(...t)=>(this.emit.call(this,...t),u(...t)),this.emit("prompt",l,this),e.autofill&&null!=o?(l.value=l.input=o,"show"===e.autofill&&await l.submit()):o=l.value=await l.run(),o}use(t){return t.call(this,this),this}set Prompt(t){this._Prompt=t}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(t){this._Prompt=t}static get Prompt(){return this._Prompt||i(4)}static get prompts(){return i(26)}static get types(){return i(46)}static get prompt(){const t=(e,...i)=>{let s=new this(...i),r=s.emit.bind(s);return s.emit=(...e)=>(t.emit(...e),r(...e)),s.prompt(e)};return n.mixinEmitter(t,new r),t}}n.mixinEmitter(a,new r);const h=a.prompts;for(let t of Object.keys(h)){let e=t.toLowerCase(),i=e=>new h[t](e).run();a.prompt[e]=i,a[e]=i,a[t]||Reflect.defineProperty(a,t,{get:()=>h[t]})}const l=t=>{n.defineExport(a,t,()=>a.types[t])};l("ArrayPrompt"),l("AuthPrompt"),l("BooleanPrompt"),l("NumberPrompt"),l("StringPrompt"),t.exports=a},function(t,e){t.exports=require("assert")},function(t,e,i){"use strict";const s="win32"===process.platform,r="linux"===process.platform,n={bullet:"â€¢",check:"âˆš",cross:"Ã—",ellipsis:"...",heart:"â¤",info:"i",line:"â”€",middot:"Â·",minus:"ï¼",plus:"ï¼‹",question:"?",questionSmall:"ï¹–",pointer:">",pointerSmall:"Â»",warning:"â€¼"},a={ballotCross:"âœ˜",bullet:"â€¢",check:"âœ”",cross:"âœ–",ellipsis:"â€¦",heart:"â¤",info:"â„¹",line:"â”€",middot:"Â·",minus:"ï¼",plus:"ï¼‹",question:"?",questionFull:"ï¼Ÿ",questionSmall:"ï¹–",pointer:r?"â–¸":"â¯",pointerSmall:r?"â€£":"â€º",warning:"âš "};t.exports=s?n:a,Reflect.defineProperty(t.exports,"windows",{enumerable:!1,value:n}),Reflect.defineProperty(t.exports,"other",{enumerable:!1,value:a})},function(t,e,i){"use strict";const s=i(18),r=i(19),n=/^(?:\x1b)([a-zA-Z0-9])$/,a=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,h={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"};const l=(t="",e={})=>{let i,s={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:t,raw:t,...e};if(Buffer.isBuffer(t)?t[0]>127&&void 0===t[1]?(t[0]-=128,t=""+String(t)):t=String(t):void 0!==t&&"string"!=typeof t?t=String(t):t||(t=s.sequence||""),s.sequence=s.sequence||t||s.name,"\r"===t)s.raw=void 0,s.name="return";else if("\n"===t)s.name="enter";else if("\t"===t)s.name="tab";else if("\b"===t||""===t||""===t||"\b"===t)s.name="backspace",s.meta=""===t.charAt(0);else if(""===t||""===t)s.name="escape",s.meta=2===t.length;else if(" "===t||" "===t)s.name="space",s.meta=2===t.length;else if(t<="")s.name=String.fromCharCode(t.charCodeAt(0)+"a".charCodeAt(0)-1),s.ctrl=!0;else if(1===t.length&&t>="0"&&t<="9")s.name="number";else if(1===t.length&&t>="a"&&t<="z")s.name=t;else if(1===t.length&&t>="A"&&t<="Z")s.name=t.toLowerCase(),s.shift=!0;else if(i=n.exec(t))s.meta=!0,s.shift=/^[A-Z]$/.test(i[1]);else if(i=a.exec(t)){let e=[...t];""===e[0]&&""===e[1]&&(s.option=!0);let r=[i[1],i[2],i[4],i[6]].filter(Boolean).join(""),n=(i[3]||i[5]||1)-1;s.ctrl=!!(4&n),s.meta=!!(10&n),s.shift=!!(1&n),s.code=r,s.name=h[r],s.shift=function(t){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(t)}(r)||s.shift,s.ctrl=function(t){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(t)}(r)||s.ctrl}return s};l.listen=(t={},e)=>{let{stdin:i}=t;if(!i||i!==process.stdin&&!i.isTTY)throw new Error("Invalid stream passed");let r=s.createInterface({terminal:!0,input:i});s.emitKeypressEvents(i,r);let n=(t,i)=>e(t,l(t,i),r),a=i.isRaw;i.isTTY&&i.setRawMode(!0),i.on("keypress",n),r.resume();return()=>{i.isTTY&&i.setRawMode(a),i.removeListener("keypress",n),r.pause(),r.close()}},l.action=(t,e,i)=>{let s={...r,...i};return e.ctrl?(e.action=s.ctrl[e.name],e):e.option&&s.option?(e.action=s.option[e.name],e):e.shift?(e.action=s.shift[e.name],e):(e.action=s.keys[e.name],e)},t.exports=l},function(t,e){t.exports=require("readline")},function(t,e,i){"use strict";e.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"},e.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"},e.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"},e.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"},e.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}},function(t,e,i){"use strict";function s(t,e,i={}){let s=t.timers[e]={name:e,start:Date.now(),ms:0,tick:0},r=i.interval||120;s.frames=i.frames||[],s.loading=!0;let n=setInterval(()=>{s.ms=Date.now()-s.start,s.tick++,t.render()},r);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),t.once("close",()=>s.stop()),s.stop}t.exports=t=>{t.timers=t.timers||{};let e=t.options.timers;if(e)for(let i of Object.keys(e)){let r=e[i];"number"==typeof r&&(r={interval:r}),s(t,i,r)}}},function(t,e,i){"use strict";const{define:s,width:r}=i(0);t.exports=class{constructor(t){let e=t.options;s(this,"_prompt",t),this.type=t.type,this.name=t.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=r(e.stdout||process.stdout),Object.assign(this,e),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=t.symbols,this.styles=t.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let t={...this};return t.status=this.status,t.buffer=Buffer.from(t.buffer),delete t.clone,t}set color(t){this._color=t}get color(){let t=this.prompt.styles;if(this.cancelled)return t.cancelled;if(this.submitted)return t.submitted;let e=this._color||t[this.status];return"function"==typeof e?e:t.pending}set loading(t){this._loading=t}get loading(){return"boolean"==typeof this._loading?this._loading:!!this.loadingChoices&&"choices"}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}}},function(t,e,i){"use strict";const s=i(23),r=i(24),n=i(0);t.exports=t=>{t.options=n.merge({},t.options.theme,t.options),t.symbols=r.merge(t.options),t.styles=s.merge(t.options)}},function(t,e,i){"use strict";const s=i(0),r=i(1),n={default:r.noop,noop:r.noop,set inverse(t){this._inverse=t},get inverse(){return this._inverse||s.inverse(this.primary)},set complement(t){this._complement=t},get complement(){return this._complement||s.complement(this.primary)},primary:r.cyan,success:r.green,danger:r.magenta,strong:r.bold,warning:r.yellow,muted:r.dim,disabled:r.gray,dark:r.dim.gray,underline:r.underline,set info(t){this._info=t},get info(){return this._info||this.primary},set em(t){this._em=t},get em(){return this._em||this.primary.underline},set heading(t){this._heading=t},get heading(){return this._heading||this.muted.underline},set pending(t){this._pending=t},get pending(){return this._pending||this.primary},set submitted(t){this._submitted=t},get submitted(){return this._submitted||this.success},set cancelled(t){this._cancelled=t},get cancelled(){return this._cancelled||this.danger},set typing(t){this._typing=t},get typing(){return this._typing||this.dim},set placeholder(t){this._placeholder=t},get placeholder(){return this._placeholder||this.primary.dim},set highlight(t){this._highlight=t},get highlight(){return this._highlight||this.inverse},merge:(t={})=>{t.styles&&"boolean"==typeof t.styles.enabled&&(r.enabled=t.styles.enabled),t.styles&&"boolean"==typeof t.styles.visible&&(r.visible=t.styles.visible);let e=s.merge({},n,t.styles);delete e.merge;for(let t of Object.keys(r))e.hasOwnProperty(t)||Reflect.defineProperty(e,t,{get:()=>r[t]});for(let t of Object.keys(r.styles))e.hasOwnProperty(t)||Reflect.defineProperty(e,t,{get:()=>r[t]});return e}};t.exports=n},function(t,e,i){"use strict";const s="win32"===process.platform,r=i(1),n=i(0),a={...r.symbols,upDownDoubleArrow:"â‡•",upDownDoubleArrow2:"â¬",upDownArrow:"â†•",asterisk:"*",asterism:"â‚",bulletWhite:"â—¦",electricArrow:"âŒ",ellipsisLarge:"â‹¯",ellipsisSmall:"â€¦",fullBlock:"â–ˆ",identicalTo:"â‰¡",indicator:r.symbols.check,leftAngle:"â€¹",mark:"â€»",minus:"âˆ’",multiplication:"Ã—",obelus:"Ã·",percent:"%",pilcrow:"Â¶",pilcrow2:"â¡",pencilUpRight:"âœ",pencilDownRight:"âœŽ",pencilRight:"âœ",plus:"+",plusMinus:"Â±",pointRight:"â˜ž",rightAngle:"â€º",section:"Â§",hexagon:{off:"â¬¡",on:"â¬¢",disabled:"â¬¢"},ballot:{on:"â˜‘",off:"â˜",disabled:"â˜’"},stars:{on:"â˜…",off:"â˜†",disabled:"â˜†"},folder:{on:"â–¼",off:"â–¶",disabled:"â–¶"},prefix:{pending:r.symbols.question,submitted:r.symbols.check,cancelled:r.symbols.cross},separator:{pending:r.symbols.pointerSmall,submitted:r.symbols.middot,cancelled:r.symbols.middot},radio:{off:s?"( )":"â—¯",on:s?"(*)":"â—‰",disabled:s?"(|)":"â’¾"},numbers:["â“ª","â‘ ","â‘¡","â‘¢","â‘£","â‘¤","â‘¥","â‘¦","â‘§","â‘¨","â‘©","â‘ª","â‘«","â‘¬","â‘­","â‘®","â‘¯","â‘°","â‘±","â‘²","â‘³","ã‰‘","ã‰’","ã‰“","ã‰”","ã‰•","ã‰–","ã‰—","ã‰˜","ã‰™","ã‰š","ã‰›","ã‰œ","ã‰","ã‰ž","ã‰Ÿ","ãŠ±","ãŠ²","ãŠ³","ãŠ´","ãŠµ","ãŠ¶","ãŠ·","ãŠ¸","ãŠ¹","ãŠº","ãŠ»","ãŠ¼","ãŠ½","ãŠ¾","ãŠ¿"]};a.merge=t=>{let e=n.merge({},r.symbols,a,t.symbols);return delete e.merge,e},t.exports=a},function(t,e,i){"use strict";const s="Apple_Terminal"===process.env.TERM_PROGRAM,r=i(1),n=i(0),a=t.exports=e,h="[";let l=!1;const o=a.code={bell:"",beep:"",beginning:"[G",down:"[J",esc:h,getPosition:"[6n",hide:"[?25l",line:"[2K",lineEnd:"[K",lineStart:"[1K",restorePosition:h+(s?"8":"u"),savePosition:h+(s?"7":"s"),screen:"[2J",show:"[?25h",up:"[1J"},u=a.cursor={get hidden(){return l},hide:()=>(l=!0,o.hide),show:()=>(l=!1,o.show),forward:(t=1)=>`[${t}C`,backward:(t=1)=>`[${t}D`,nextLine:(t=1)=>"[E".repeat(t),prevLine:(t=1)=>"[F".repeat(t),up:(t=1)=>t?`[${t}A`:"",down:(t=1)=>t?`[${t}B`:"",right:(t=1)=>t?`[${t}C`:"",left:(t=1)=>t?`[${t}D`:"",to:(t,e)=>e?`[${e+1};${t+1}H`:`[${t+1}G`,move(t=0,e=0){let i="";return i+=t<0?u.left(-t):t>0?u.right(t):"",i+=e<0?u.up(-e):e>0?u.down(e):"",i},restore(t={}){let{after:e,cursor:i,initial:s,input:r,prompt:h,size:l,value:o}=t;if(s=n.isPrimitive(s)?String(s):"",r=n.isPrimitive(r)?String(r):"",o=n.isPrimitive(o)?String(o):"",l){let t=a.cursor.up(l)+a.cursor.to(h.length),e=r.length-i;return e>0&&(t+=a.cursor.left(e)),t}if(o||e){let t=!r&&s?-s.length:-r.length+i;return e&&(t-=e.length),""===r&&s&&!h.includes(s)&&(t+=s.length),a.cursor.move(t)}}},c=a.erase={screen:o.screen,up:o.up,down:o.down,line:o.line,lineEnd:o.lineEnd,lineStart:o.lineStart,lines(t){let e="";for(let i=0;i<t;i++)e+=a.erase.line+(i<t-1?a.cursor.up(1):"");return t&&(e+=a.code.beginning),e}};a.clear=(t="",e=process.stdout.columns)=>{if(!e)return c.line+u.to(0);let i=t.split(/\r?\n/),s=0;for(let t of i)s+=1+Math.floor(Math.max((n=t,[...r.unstyle(n)].length-1),0)/e);var n;return(c.line+u.prevLine()).repeat(s-1)+c.line+u.to(0)}},function(t,e,i){"use strict";const s=i(0),r=(t,i)=>{s.defineExport(e,t,i),s.defineExport(e,t.toLowerCase(),i)};r("AutoComplete",()=>i(27)),r("BasicAuth",()=>i(29)),r("Confirm",()=>i(30)),r("Editable",()=>i(31)),r("Form",()=>i(6)),r("Input",()=>i(11)),r("Invisible",()=>i(33)),r("List",()=>i(34)),r("MultiSelect",()=>i(35)),r("Numeral",()=>i(36)),r("Password",()=>i(37)),r("Scale",()=>i(38)),r("Select",()=>i(2)),r("Snippet",()=>i(39)),r("Sort",()=>i(41)),r("Survey",()=>i(42)),r("Text",()=>i(43)),r("Toggle",()=>i(44)),r("Quiz",()=>i(45))},function(t,e,i){"use strict";const s=i(2);t.exports=class extends s{constructor(t){super(t),this.cursorShow()}moveCursor(t){this.state.cursor+=t}dispatch(t){return this.append(t)}space(t){return this.options.multiple?super.space(t):this.append(t)}append(t){let{cursor:e,input:i}=this.state;return this.input=i.slice(0,e)+t+i.slice(e),this.moveCursor(1),this.complete()}delete(){let{cursor:t,input:e}=this.state;return e?(this.input=e.slice(0,t-1)+e.slice(t),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:t,input:e}=this.state;return void 0===e[t]?this.alert():(this.input=`${e}`.slice(0,t)+`${e}`.slice(t+1),this.complete())}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(t=this.input,e=this.state._choices){if("function"==typeof this.options.suggest)return this.options.suggest.call(this,t,e);let i=t.toLowerCase();return e.filter(t=>t.message.toLowerCase().includes(i))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map(t=>this.styles.primary(t.message)).join(", ");if(this.state.submitted){let t=this.value=this.input=this.focused.value;return this.styles.primary(t)}return this.input}async render(){if("pending"!==this.state.status)return super.render();let t=this.options.highlight?this.options.highlight.bind(this):this.styles.placeholder,e=((t,e)=>{let i=t.toLowerCase();return t=>{let s=t.toLowerCase().indexOf(i),r=e(t.slice(s,s+i.length));return s>=0?t.slice(0,s)+r+t.slice(s+i.length):t}})(this.input,t),i=this.choices;this.choices=i.map(t=>({...t,message:e(t.message)})),await super.render(),this.choices=i}submit(){return this.options.multiple&&(this.value=this.selected.map(t=>t.name)),super.submit()}}},function(t,e,i){"use strict";const s=i(0),r={default:(t,e)=>e,checkbox(t,e){throw new Error("checkbox role is not implemented yet")},editable(t,e){throw new Error("editable role is not implemented yet")},expandable(t,e){throw new Error("expandable role is not implemented yet")},heading:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find(t=>null!=t),e.message=e.message||"",e),input(t,e){throw new Error("input role is not implemented yet")},option:(t,e)=>r.default(t,e),radio(t,e){throw new Error("radio role is not implemented yet")},separator:(t,e)=>(e.disabled="",e.indicator=[e.indicator," "].find(t=>null!=t),e.message=e.message||t.symbols.line.repeat(5),e),spacer:(t,e)=>e};t.exports=(t,e={})=>{let i=s.merge({},r,e.roles);return i[t]||i.default}},function(t,e,i){"use strict";const s=i(9);function r(t,e){return t.username===this.options.username&&t.password===this.options.password}const n=(t=r)=>{const e=[{name:"username",message:"username"},{name:"password",message:"password",format(t){if(this.options.showPassword)return t;return(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length))}}];class i extends(s.create(t)){constructor(t){super({...t,choices:e})}static create(t){return n(t)}}return i};t.exports=n()},function(t,e,i){"use strict";const s=i(7);t.exports=class extends s{constructor(t){super(t),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}}},function(t,e,i){"use strict";const s=i(2),r=i(6).prototype;t.exports=class extends s{constructor(t){super({...t,multiple:!0}),this.align=[this.options.align,"left"].find(t=>null!=t),this.emptyError="",this.values={}}dispatch(t,e){let i=this.focused,s=i.parent||{};return i.editable||s.editable||"a"!==t&&"i"!==t?r.dispatch.call(this,t,e):super[t]()}append(t,e){return r.append.call(this,t,e)}delete(t,e){return r.delete.call(this,t,e)}space(t){return this.focused.editable?this.append(t):super.space()}number(t){return this.focused.editable?this.append(t):super.number(t)}next(){return this.focused.editable?r.next.call(this):super.next()}prev(){return this.focused.editable?r.prev.call(this):super.prev()}async indicator(t,e){let i=t.indicator||"",s=t.editable?i:super.indicator(t,e);return await this.resolve(s,this.state,t,e)||""}indent(t){return"heading"===t.role?"":t.editable?" ":"  "}async renderChoice(t,e){return t.indent="",t.editable?r.renderChoice.call(this,t,e):super.renderChoice(t,e)}error(){return""}footer(){return this.state.error}async validate(){let t=!0;for(let e of this.choices){if("function"!=typeof e.validate)continue;if("heading"===e.role)continue;let i=e.parent?this.value[e.parent.name]:this.value;if(e.editable?i=e.value===e.name?e.initial||"":e.value:this.isDisabled(e)||(i=!0===e.enabled),t=await e.validate(i,this.state),!0!==t)break}return!0!==t&&(this.state.error="string"==typeof t?t:"Invalid Input"),t}submit(){if(!0===this.focused.newChoice)return super.submit();if(this.choices.some(t=>t.newChoice))return this.alert();this.value={};for(let t of this.choices){let e=t.parent?this.value[t.parent.name]:this.value;"heading"!==t.role?t.editable?e[t.name]=t.value===t.name?t.initial||"":t.value:this.isDisabled(t)||(e[t.name]=!0===t.enabled):this.value[t.name]={}}return this.base.submit.call(this)}}},function(t,e,i){"use strict";const s=t=>(t=>t.filter((e,i)=>t.lastIndexOf(e)===i))(t).filter(Boolean);t.exports=(t,e={},i="")=>{let r,n,{past:a=[],present:h=""}=e;switch(t){case"prev":case"undo":return r=a.slice(0,a.length-1),n=a[a.length-1]||"",{past:s([i,...r]),present:n};case"next":case"redo":return r=a.slice(1),n=a[0]||"",{past:s([...r,i]),present:n};case"save":return{past:s([...a,i]),present:""};case"remove":return n=s(a.filter(t=>t!==i)),h="",n.length&&(h=n.pop()),{past:n,present:h};default:throw new Error(`Invalid action: "${t}"`)}}},function(t,e,i){"use strict";const s=i(3);t.exports=class extends s{format(){return""}}},function(t,e,i){"use strict";const s=i(3);t.exports=class extends s{constructor(t={}){super(t),this.sep=this.options.separator||/, */,this.initial=t.initial||""}split(t=this.value){return t?String(t).split(this.sep):[]}format(){let t=this.state.submitted?this.styles.primary:t=>t;return this.list.map(t).join(", ")}async submit(t){let e=this.state.error||await this.validate(this.list,this.state);return!0!==e?(this.state.error=e,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}}},function(t,e,i){"use strict";const s=i(2);t.exports=class extends s{constructor(t){super({...t,multiple:!0})}}},function(t,e,i){t.exports=i(12)},function(t,e,i){"use strict";const s=i(3);t.exports=class extends s{constructor(t){super(t),this.cursorShow()}format(t=this.input){if(!this.keypressed)return"";return(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(t.length))}}},function(t,e,i){"use strict";const s=i(1),r=i(5),n=i(0);t.exports=class extends r{constructor(t={}){super(t),this.widths=[].concat(t.messageWidth||50),this.align=[].concat(t.align||"left"),this.linebreak=t.linebreak||!1,this.edgeLength=t.edgeLength||3,this.newline=t.newline||"\n   ";let e=t.startNumber||1;"number"==typeof this.scale&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map((t,i)=>({name:i+e})))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(!0===this.tableized)return;this.tableized=!0;let t=0;for(let e of this.choices){t=Math.max(t,e.message.length),e.scaleIndex=e.initial||2,e.scale=[];for(let t=0;t<this.scale.length;t++)e.scale.push({index:t})}this.widths[0]=Math.min(this.widths[0],t+3)}async dispatch(t,e){if(this.multiple)return this[e.name]?await this[e.name](t,e):await super.dispatch(t,e);this.alert()}heading(t,e,i){return this.styles.strong(t)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIndex>=this.scale.length-1?this.alert():(t.scaleIndex++,this.render())}left(){let t=this.focused;return t.scaleIndex<=0?this.alert():(t.scaleIndex--,this.render())}indent(){return""}format(){if(this.state.submitted){return this.choices.map(t=>this.styles.info(t.index)).join(", ")}return""}pointer(){return""}renderScaleKey(){if(!1===this.scaleKey)return"";if(this.state.submitted)return"";return["",...this.scale.map(t=>`   ${t.name} - ${t.message}`)].map(t=>this.styles.muted(t)).join("\n")}renderScaleHeading(t){let e=this.scale.map(t=>t.name);"function"==typeof this.options.renderScaleHeading&&(e=this.options.renderScaleHeading.call(this,t));let i=this.scaleLength-e.join("").length,s=Math.round(i/(e.length-1)),r=e.map(t=>this.styles.strong(t)).join(" ".repeat(s)),n=" ".repeat(this.widths[0]);return this.margin[3]+n+this.margin[1]+r}scaleIndicator(t,e,i){if("function"==typeof this.options.scaleIndicator)return this.options.scaleIndicator.call(this,t,e,i);let s=t.scaleIndex===e.index;return e.disabled?this.styles.hint(this.symbols.radio.disabled):s?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(t,e){let i=t.scale.map(i=>this.scaleIndicator(t,i,e)),s="Hyper"===this.term?"":" ";return i.join(s+this.symbols.line.repeat(this.edgeLength))}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,r=await this.pointer(t,e),a=await t.hint;a&&!n.hasColor(a)&&(a=this.styles.muted(a));let h=t=>this.margin[3]+t.replace(/\s+$/,"").padEnd(this.widths[0]," "),l=this.newline,o=this.indent(t),u=await this.resolve(t.message,this.state,t,e),c=await this.renderScale(t,e),d=this.margin[1]+this.margin[3];this.scaleLength=s.unstyle(c).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-d.length);let p=n.wordWrap(u,{width:this.widths[0],newline:l}).split("\n").map(t=>h(t)+this.margin[1]);return i&&(c=this.styles.info(c),p=p.map(t=>this.styles.info(t))),p[0]+=c,this.linebreak&&p.push(""),[o+r,p.join("\n")].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e)),e=await Promise.all(t),i=await this.renderScaleHeading();return this.margin[0]+[i,...e.map(t=>t.join(" "))].join("\n")}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=await this.message(),n="";!1!==this.options.promptLine&&(n=[i,r,s,""].join(" "),this.state.prompt=n);let a=await this.header(),h=await this.format(),l=await this.renderScaleKey(),o=await this.error()||await this.hint(),u=await this.renderChoices(),c=await this.footer(),d=this.emptyError;h&&(n+=h),o&&!n.includes(o)&&(n+=" "+o),t&&!h&&!u.trim()&&this.multiple&&null!=d&&(n+=this.styles.danger(d)),this.clear(e),this.write([a,n,l,u,c].filter(Boolean).join("\n")),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIndex;return this.base.submit.call(this)}}},function(t,e,i){"use strict";const s=i(1),r=i(40),n=i(4);t.exports=class extends n{constructor(t){super(t),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await r(this),await super.initialize()}async reset(t){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},!0!==t&&(await this.initialize(),await this.render())}moveCursor(t){let e=this.getItem();this.cursor+=t,e.cursor+=t}dispatch(t,e){e.code||e.ctrl||null==t||!this.getItem()?this.alert():this.append(t,e)}append(t,e){let i=this.getItem(),s=i.input.slice(0,this.cursor),r=i.input.slice(this.cursor);this.input=i.input=`${s}${t}${r}`,this.moveCursor(1),this.render()}delete(){let t=this.getItem();if(this.cursor<=0||!t.input)return this.alert();let e=t.input.slice(this.cursor),i=t.input.slice(0,this.cursor-1);this.input=t.input=`${i}${e}`,this.moveCursor(-1),this.render()}increment(t){return t>=this.state.keys.length-1?0:t+1}decrement(t){return t<=0?this.state.keys.length-1:t-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(t){let e=this.state.completed<100?this.styles.warning:this.styles.success;return!0===this.state.submitted&&100!==this.state.completed&&(e=this.styles.danger),e(`${this.state.completed}% completed`)}async render(){let{index:t,keys:e=[],submitted:i,size:s}=this.state,r=[this.options.newline,"\n"].find(t=>null!=t),n=await this.prefix(),a=await this.separator(),h=[n,await this.message(),a].filter(Boolean).join(" ");this.state.prompt=h;let l=await this.header(),o=await this.error()||"",u=await this.hint()||"",c=i?"":await this.interpolate(this.state),d=this.state.key=e[t]||"",p=await this.format(d),m=await this.footer();p&&(h+=" "+p),u&&!p&&0===this.state.completed&&(h+=" "+u),this.clear(s);let f=[l,h,c,m,o.trim()];this.write(f.filter(Boolean).join(r)),this.restore()}getItem(t){let{items:e,keys:i,index:s}=this.state,r=e.find(t=>t.name===i[s]);return r&&null!=r.input&&(this.input=r.input,this.cursor=r.cursor),r}async submit(){"function"!=typeof this.interpolate&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:t,missing:e,output:i,values:r}=this.state;if(t.size){let e="";for(let[i,s]of t)e+=`Invalid ${i}: ${s}\n`;return this.state.error=e,super.submit()}if(e.size)return this.state.error="Required: "+[...e.keys()].join(", "),super.submit();let n=s.unstyle(i).split("\n").map(t=>t.slice(1)).join("\n");return this.value={values:r,result:n},super.submit()}}},function(t,e,i){"use strict";const s=i(1);class r{constructor(t){this.name=t.key,this.field=t.field||{},this.value=((t="")=>"string"==typeof t?t.replace(/^['"]|['"]$/g,""):"")(t.initial||this.field.initial||""),this.message=t.message||this.name,this.cursor=0,this.input="",this.lines=[]}}function n(t,e,i,s){return(i,r,n,a)=>"function"==typeof n.field[t]?n.field[t].call(e,i,r,n,a):[s,i].find(t=>e.isValue(t))}t.exports=async t=>{let e=t.options,i=new Set(!0===e.required?[]:e.required||[]),a={...e.values,...e.initial},{tabstops:h,items:l,keys:o}=await(async(t={},e={},i=(t=>t))=>{let s=new Set,n=t.fields||[],a=t.template,h=[],l=[],o=[],u=1;"function"==typeof a&&(a=await a());let c=-1,d=()=>a[++c],p=()=>a[c+1],m=t=>{t.line=u,h.push(t)};for(m({type:"bos",value:""});c<a.length-1;){let t=d();if(/^[^\S\n ]$/.test(t)){m({type:"text",value:t});continue}if("\n"===t){m({type:"newline",value:t}),u++;continue}if("\\"===t){t+=d(),m({type:"text",value:t});continue}if(("$"===t||"#"===t||"{"===t)&&"{"===p()){t+=d();let a,h={type:"template",open:t,inner:"",close:"",value:t};for(;a=d();){if("}"===a){"}"===p()&&(a+=d()),h.value+=a,h.close=a;break}":"===a?(h.initial="",h.key=h.inner):void 0!==h.initial&&(h.initial+=a),h.value+=a,h.inner+=a}h.template=h.open+(h.initial||h.inner)+h.close,h.key=h.key||h.inner,e.hasOwnProperty(h.key)&&(h.initial=e[h.key]),h=i(h),m(h),o.push(h.key),s.add(h.key);let u=l.find(t=>t.name===h.key);h.field=n.find(t=>t.name===h.key),u||(u=new r(h),l.push(u)),u.lines.push(h.line-1);continue}let a=h[h.length-1];"text"===a.type&&a.line===u?a.value+=t:m({type:"text",value:t})}return m({type:"eos",value:""}),{input:a,tabstops:h,unique:s,keys:o,items:l}})(e,a),u=n("result",t,e),c=n("format",t,e),d=n("validate",t,e,!0),p=t.isValue.bind(t);return async(r={},n=!1)=>{let a=0;r.required=i,r.items=l,r.keys=o,r.output="";let m=async(t,e,i,s)=>{let r=await d(t,e,i,s);return!1===r?"Invalid field "+i.name:r};for(let i of h){let h=i.value,o=i.key;if("template"===i.type){if("template"===i.type){let d=l.find(t=>t.name===o);!0===e.required&&r.required.add(d.name);let f=[d.input,r.values[d.value],d.value,h].find(p),g=(d.field||{}).message||i.inner;if(n){let t=await m(r.values[o],r,d,a);if(t&&"string"==typeof t||!1===t){r.invalid.set(o,t);continue}r.invalid.delete(o);let e=await u(r.values[o],r,d,a);r.output+=s.unstyle(e);continue}d.placeholder=!1;let y=h;h=await c(h,r,d,a),f!==h?(r.values[o]=f,h=t.styles.typing(f),r.missing.delete(g)):(r.values[o]=void 0,f=`<${g}>`,h=t.styles.primary(f),d.placeholder=!0,r.required.has(o)&&r.missing.add(g)),r.missing.has(g)&&r.validating&&(h=t.styles.warning(f)),r.invalid.has(o)&&r.validating&&(h=t.styles.danger(f)),a===r.index&&(h=y!==h?t.styles.underline(h):t.styles.heading(s.unstyle(h))),a++}h&&(r.output+=h)}else h&&(r.output+=h)}let f=r.output.split("\n").map(t=>" "+t),g=l.length,y=0;for(let e of l)r.invalid.has(e.name)&&e.lines.forEach(t=>{" "===f[t][0]&&(f[t]=r.styles.danger(r.symbols.bullet)+f[t].slice(1))}),t.isValue(r.values[e.name])&&y++;return r.completed=(y/g*100).toFixed(0),r.output=f.join("\n"),r.output}}},function(t,e,i){"use strict";const s="(Use <shift>+<up/down> to sort)",r=i(2);t.exports=class extends r{constructor(t){super({...t,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,s].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(t,e){let i=await super.renderChoice(t,e),s=this.symbols.identicalTo+" ",r=this.index===e&&this.sorting?this.styles.muted(s):"  ";return!1===this.options.drag&&(r=""),!0===this.options.numbered?r+`${e+1} - `+i:r+i}get selected(){return this.choices}submit(){return this.value=this.choices.map(t=>t.value),super.submit()}}},function(t,e,i){"use strict";const s=i(5);function r(t,e={}){if(Array.isArray(e.scale))return e.scale.map(t=>({...t}));let i=[];for(let e=1;e<t+1;e++)i.push({i:e,selected:!1});return i}t.exports=class extends s{constructor(t={}){if(super(t),this.emptyError=t.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let t=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];t=t.map(t=>this.styles.muted(t)),this.state.header=t.join("\n   ")}}async toChoices(...t){if(this.createdScales)return!1;this.createdScales=!0;let e=await super.toChoices(...t);for(let t of e)t.scale=r(5,this.options),t.scaleIdx=2;return e}dispatch(){this.alert()}space(){let t=this.focused,e=t.scale[t.scaleIdx],i=e.selected;return t.scale.forEach(t=>t.selected=!1),e.selected=!i,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let t=this.focused;return t.scaleIdx>=t.scale.length-1?this.alert():(t.scaleIdx++,this.render())}left(){let t=this.focused;return t.scaleIdx<=0?this.alert():(t.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(t,e){await this.onChoice(t,e);let i=this.index===e,s="Hyper"===this.term,r=s?9:8,n=s?"":" ",a=this.symbols.line.repeat(r),h=" ".repeat(r+(s?0:1)),l=t=>(t?this.styles.success("â—‰"):"â—¯")+n,o=e+1+".",u=i?this.styles.heading:this.styles.noop,c=await this.resolve(t.message,this.state,t,e),d=this.indent(t),p=d+t.scale.map((e,i)=>l(i===t.scaleIdx)).join(a),m=d+t.scale.map((e,i)=>(e=>e===t.scaleIdx?u(e):e)(i)).join(h);return i&&(p=this.styles.cyan(p),m=this.styles.cyan(m)),[[o,c].filter(Boolean).join(" "),p,m," "].filter(Boolean).join("\n")}async renderChoices(){if(this.state.submitted)return"";let t=this.visible.map(async(t,e)=>await this.renderChoice(t,e)),e=await Promise.all(t);return e.length||e.push(this.styles.danger("No matching choices")),e.join("\n")}format(){if(this.state.submitted){return this.choices.map(t=>this.styles.info(t.scaleIdx)).join(", ")}return""}async render(){let{submitted:t,size:e}=this.state,i=await this.prefix(),s=await this.separator(),r=[i,await this.message(),s].filter(Boolean).join(" ");this.state.prompt=r;let n=await this.header(),a=await this.format(),h=await this.error()||await this.hint(),l=await this.renderChoices(),o=await this.footer();!a&&h||(r+=" "+a),h&&!r.includes(h)&&(r+=" "+h),t&&!a&&!l&&this.multiple&&"form"!==this.type&&(r+=this.styles.danger(this.emptyError)),this.clear(e),this.write([r,n,l,o].filter(Boolean).join("\n")),this.restore()}submit(){this.value={};for(let t of this.choices)this.value[t.name]=t.scaleIdx;return this.base.submit.call(this)}}},function(t,e,i){t.exports=i(11)},function(t,e,i){"use strict";const s=i(7);t.exports=class extends s{async initialize(){await super.initialize(),this.value=this.initial=!!this.options.initial,this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(!0===this.value)return this.alert();this.value=!0,this.render()}disable(){if(!1===this.value)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(t="",e){switch(t.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let t=t=>this.styles.primary.underline(t);return[this.value?this.disabled:t(this.disabled),this.value?t(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:t}=this.state,e=await this.header(),i=await this.prefix(),s=await this.separator(),r=await this.message(),n=await this.format(),a=await this.error()||await this.hint(),h=await this.footer(),l=[i,r,s,n].join(" ");this.state.prompt=l,a&&!l.includes(a)&&(l+=" "+a),this.clear(t),this.write([e,l,h].filter(Boolean).join("\n")),this.write(this.margin[2]),this.restore()}}},function(t,e,i){"use strict";const s=i(2);t.exports=class extends s{constructor(t){if(super(t),"number"!=typeof this.options.correctChoice||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(t,e){let i=await super.toChoices(t,e);if(i.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>i.length)throw new Error("Please specify the index of the correct answer from the list of choices");return i}check(t){return t.index===this.options.correctChoice}async result(t){return{selectedAnswer:t,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}}},function(t,e,i){t.exports={ArrayPrompt:i(5),AuthPrompt:i(9),BooleanPrompt:i(7),NumberPrompt:i(12),StringPrompt:i(3)}}]);